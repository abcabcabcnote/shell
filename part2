function Get-ChromeSavedPasswords {
    param (
        [string]$ProfilePath = "$env:USERPROFILE\AppData\Local\Google\Chrome\User Data\Default"
    )

    $LoginDataPath = Join-Path $ProfilePath "Login Data"
    $TempPath = Join-Path $env:TEMP "ChromeLoginData.db"

    # Copy the Login Data file to a temporary location to avoid locking issues
    Copy-Item -Path $LoginDataPath -Destination $TempPath -Force

    # Connect to the SQLite database
    $Connection = New-Object -TypeName System.Data.SQLite.SQLiteConnection
    $Connection.ConnectionString = "Data Source=$TempPath;Version=3;New=False;Compress=True;"
    $Connection.Open()

    # Query the database to retrieve saved passwords
    $Command = $Connection.CreateCommand()
    $Command.CommandText = "SELECT origin_url, username_value, password_value FROM logins"
    $Reader = $Command.ExecuteReader()

    # Iterate through the results and display the saved passwords
    while ($Reader.Read()) {
        $Url = $Reader.GetValue(0)
        $Username = $Reader.GetValue(1)
        $EncryptedPassword = $Reader.GetValue(2)

        # Decrypt the password
        $PasswordBytes = [System.Security.Cryptography.ProtectedData]::Unprotect($EncryptedPassword, $null, 'CurrentUser')
        $Password = [System.Text.Encoding]::UTF8.GetString($PasswordBytes)

        Write-Output "URL: $Url"
        Write-Output "Username: $Username"
        Write-Output "Password: $Password"
        Write-Output "--------------------------------"
    }

    # Close the database connection and remove the temporary file
    $Connection.Close()
    $Connection.Dispose()
    Remove-Item -Path $TempPath -Force
}

[string]$ProfilePath = "$env:USERPROFILE\AppData\Local\Microsoft\Edge\User Data\Default"
Get-ChromeSavedPasswords($ProfilePath)